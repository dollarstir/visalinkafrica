{"ast":null,"code":"var _jsxFileName = \"/Users/dollarsoft/Documents/projects/personal/node/visaLink Africa/src/components/Applications/NewApplicationModal.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { X, User, FileText, Calendar, AlertCircle } from 'lucide-react';\nimport apiService from '../../services/api';\nimport { showError } from '../../utils/toast';\nimport { useAuth } from '../Auth/AuthContext';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst NewApplicationModal = ({\n  onClose,\n  onSave\n}) => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [formData, setFormData] = useState({\n    customer_id: '',\n    service_id: '',\n    staff_id: '',\n    priority: 'normal',\n    status: 'draft',\n    notes: '',\n    estimated_completion_date: ''\n  });\n  const [errors, setErrors] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [customers, setCustomers] = useState([]);\n  const [services, setServices] = useState([]);\n  const [staff, setStaff] = useState([]);\n  const [loadingData, setLoadingData] = useState(true);\n\n  // Load dropdown data\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        setLoadingData(true);\n        const [customersRes, servicesRes, staffRes] = await Promise.all([apiService.getCustomers({\n          page: 1,\n          limit: 100\n        }), apiService.getServices({\n          page: 1,\n          limit: 100\n        }), apiService.getStaff({\n          page: 1,\n          limit: 100\n        })]);\n        setCustomers(customersRes.customers || []);\n        setServices(servicesRes.services || []);\n        setStaff(staffRes.staff || []);\n      } catch (err) {\n        console.error('Error loading dropdown data:', err);\n        showError('Failed to load data. Please try again.');\n      } finally {\n        setLoadingData(false);\n      }\n    };\n    loadData();\n  }, []);\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n\n    // Clear error when user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  };\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.customer_id) newErrors.customer_id = 'Customer is required';\n    if (!formData.service_id) newErrors.service_id = 'Service is required';\n    if (!formData.staff_id) newErrors.staff_id = 'Staff member is required';\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!validateForm()) {\n      return;\n    }\n    try {\n      setLoading(true);\n\n      // Prepare data for API\n      const applicationData = {\n        customer_id: parseInt(formData.customer_id),\n        service_id: parseInt(formData.service_id),\n        staff_id: formData.staff_id ? parseInt(formData.staff_id) : null,\n        // Agents cannot control status or estimated completion date\n        status: (user === null || user === void 0 ? void 0 : user.role) === 'agent' ? 'draft' : formData.status,\n        priority: formData.priority.toLowerCase(),\n        notes: formData.notes || null,\n        estimated_completion_date: (user === null || user === void 0 ? void 0 : user.role) === 'agent' ? null : formData.estimated_completion_date || null\n      };\n      await onSave(applicationData);\n      onClose();\n    } catch (err) {\n      console.error('Error creating application:', err);\n      // Error is handled by parent component\n    } finally {\n      setLoading(false);\n    }\n  };\n  const selectedCustomer = customers.find(c => c.id === parseInt(formData.customer_id));\n  const selectedService = services.find(s => s.id === parseInt(formData.service_id));\n  const selectedStaff = staff.find(s => s.id === parseInt(formData.staff_id));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 z-50 overflow-y-auto\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed inset-0 transition-opacity\",\n        onClick: onClose,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-0 bg-gray-500 opacity-75\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-medium text-gray-900\",\n                children: \"Create New Application\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: onClose,\n                className: \"text-gray-400 hover:text-gray-600\",\n                children: /*#__PURE__*/_jsxDEV(X, {\n                  className: \"h-6 w-6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 15\n            }, this), loadingData ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center py-8\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-gray-500\",\n                children: \"Loading data...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"label\",\n                  children: \"Customer *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"relative\",\n                  children: [/*#__PURE__*/_jsxDEV(User, {\n                    className: \"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    name: \"customer_id\",\n                    value: formData.customer_id,\n                    onChange: handleInputChange,\n                    className: `input-field pl-10 ${errors.customer_id ? 'border-red-500' : ''}`,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"Select a customer\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 154,\n                      columnNumber: 25\n                    }, this), customers.map(customer => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: customer.id,\n                      children: [customer.first_name, \" \", customer.last_name, \" (\", customer.email, \")\"]\n                    }, customer.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 156,\n                      columnNumber: 27\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 148,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 21\n                }, this), errors.customer_id && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-600 flex items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                    className: \"h-4 w-4 mr-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 164,\n                    columnNumber: 25\n                  }, this), errors.customer_id]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"label\",\n                  children: \"Service *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"relative\",\n                  children: [/*#__PURE__*/_jsxDEV(FileText, {\n                    className: \"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    name: \"service_id\",\n                    value: formData.service_id,\n                    onChange: handleInputChange,\n                    className: `input-field pl-10 ${errors.service_id ? 'border-red-500' : ''}`,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"Select a service\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 181,\n                      columnNumber: 25\n                    }, this), services.map(service => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: service.id,\n                      children: service.name\n                    }, service.id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 183,\n                      columnNumber: 27\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 21\n                }, this), errors.service_id && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-600 flex items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                    className: \"h-4 w-4 mr-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 191,\n                    columnNumber: 25\n                  }, this), errors.service_id]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 23\n                }, this), selectedService && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-gray-500\",\n                  children: selectedService.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"label\",\n                  children: \"Assign To *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"relative\",\n                  children: [/*#__PURE__*/_jsxDEV(User, {\n                    className: \"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    name: \"staff_id\",\n                    value: formData.staff_id,\n                    onChange: handleInputChange,\n                    className: `input-field pl-10 ${errors.staff_id ? 'border-red-500' : ''}`,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"Select staff member\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 211,\n                      columnNumber: 25\n                    }, this), staff.map(member => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: member.id,\n                      children: [member.first_name, \" \", member.last_name, \" - \", member.position]\n                    }, member.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 213,\n                      columnNumber: 27\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 205,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 21\n                }, this), errors.staff_id && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-600 flex items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                    className: \"h-4 w-4 mr-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 221,\n                    columnNumber: 25\n                  }, this), errors.staff_id]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"label\",\n                  children: \"Priority\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  name: \"priority\",\n                  value: formData.priority,\n                  onChange: handleInputChange,\n                  className: \"input-field\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"low\",\n                    children: \"Low\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 236,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"normal\",\n                    children: \"Normal\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"high\",\n                    children: \"High\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"urgent\",\n                    children: \"Urgent\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"label\",\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  name: \"status\",\n                  value: formData.status,\n                  onChange: handleInputChange,\n                  className: \"input-field\",\n                  disabled: (user === null || user === void 0 ? void 0 : user.role) === 'agent',\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"draft\",\n                    children: \"Draft\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 253,\n                    columnNumber: 23\n                  }, this), (user === null || user === void 0 ? void 0 : user.role) !== 'agent' && /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"pending\",\n                      children: \"Pending\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 256,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"submitted\",\n                      children: \"Submitted\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 257,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"under_review\",\n                      children: \"Under Review\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 258,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 21\n                }, this), (user === null || user === void 0 ? void 0 : user.role) === 'agent' && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-xs text-gray-500\",\n                  children: \"Status is fixed to Draft. Admin or staff will update it as the application progresses.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 19\n              }, this), (user === null || user === void 0 ? void 0 : user.role) !== 'agent' && /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"label\",\n                  children: \"Estimated Completion Date\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"relative\",\n                  children: [/*#__PURE__*/_jsxDEV(Calendar, {\n                    className: \"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 274,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"date\",\n                    name: \"estimated_completion_date\",\n                    value: formData.estimated_completion_date,\n                    onChange: handleInputChange,\n                    className: \"input-field pl-10\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"label\",\n                  children: \"Notes\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  name: \"notes\",\n                  value: formData.notes,\n                  onChange: handleInputChange,\n                  rows: 3,\n                  className: \"input-field\",\n                  placeholder: \"Additional notes or requirements...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: loading || loadingData,\n              className: \"btn-primary w-full sm:w-auto sm:ml-3 disabled:opacity-50 disabled:cursor-not-allowed\",\n              children: loading ? 'Creating...' : 'Create Application'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: onClose,\n              disabled: loading,\n              className: \"btn-secondary w-full sm:w-auto mt-3 sm:mt-0 disabled:opacity-50\",\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n};\n_s(NewApplicationModal, \"QGdbZu0/m2vSNlnHjqjcldudfTA=\", false, function () {\n  return [useAuth];\n});\n_c = NewApplicationModal;\nexport default NewApplicationModal;\nvar _c;\n$RefreshReg$(_c, \"NewApplicationModal\");","map":{"version":3,"names":["React","useState","useEffect","X","User","FileText","Calendar","AlertCircle","apiService","showError","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","NewApplicationModal","onClose","onSave","_s","user","formData","setFormData","customer_id","service_id","staff_id","priority","status","notes","estimated_completion_date","errors","setErrors","loading","setLoading","customers","setCustomers","services","setServices","staff","setStaff","loadingData","setLoadingData","loadData","customersRes","servicesRes","staffRes","Promise","all","getCustomers","page","limit","getServices","getStaff","err","console","error","handleInputChange","e","name","value","target","prev","validateForm","newErrors","Object","keys","length","handleSubmit","preventDefault","applicationData","parseInt","role","toLowerCase","selectedCustomer","find","c","id","selectedService","s","selectedStaff","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange","map","customer","first_name","last_name","email","service","description","member","position","disabled","rows","placeholder","_c","$RefreshReg$"],"sources":["/Users/dollarsoft/Documents/projects/personal/node/visaLink Africa/src/components/Applications/NewApplicationModal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { X, User, FileText, Calendar, AlertCircle } from 'lucide-react';\nimport apiService from '../../services/api';\nimport { showError } from '../../utils/toast';\nimport { useAuth } from '../Auth/AuthContext';\n\nconst NewApplicationModal = ({ onClose, onSave }) => {\n  const { user } = useAuth();\n  const [formData, setFormData] = useState({\n    customer_id: '',\n    service_id: '',\n    staff_id: '',\n    priority: 'normal',\n    status: 'draft',\n    notes: '',\n    estimated_completion_date: ''\n  });\n\n  const [errors, setErrors] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [customers, setCustomers] = useState([]);\n  const [services, setServices] = useState([]);\n  const [staff, setStaff] = useState([]);\n  const [loadingData, setLoadingData] = useState(true);\n\n  // Load dropdown data\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        setLoadingData(true);\n        const [customersRes, servicesRes, staffRes] = await Promise.all([\n          apiService.getCustomers({ page: 1, limit: 100 }),\n          apiService.getServices({ page: 1, limit: 100 }),\n          apiService.getStaff({ page: 1, limit: 100 })\n        ]);\n\n        setCustomers(customersRes.customers || []);\n        setServices(servicesRes.services || []);\n        setStaff(staffRes.staff || []);\n      } catch (err) {\n        console.error('Error loading dropdown data:', err);\n        showError('Failed to load data. Please try again.');\n      } finally {\n        setLoadingData(false);\n      }\n    };\n\n    loadData();\n  }, []);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    \n    // Clear error when user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n\n    if (!formData.customer_id) newErrors.customer_id = 'Customer is required';\n    if (!formData.service_id) newErrors.service_id = 'Service is required';\n    if (!formData.staff_id) newErrors.staff_id = 'Staff member is required';\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    try {\n      setLoading(true);\n      \n      // Prepare data for API\n      const applicationData = {\n        customer_id: parseInt(formData.customer_id),\n        service_id: parseInt(formData.service_id),\n        staff_id: formData.staff_id ? parseInt(formData.staff_id) : null,\n        // Agents cannot control status or estimated completion date\n        status: user?.role === 'agent' ? 'draft' : formData.status,\n        priority: formData.priority.toLowerCase(),\n        notes: formData.notes || null,\n        estimated_completion_date: user?.role === 'agent'\n          ? null\n          : (formData.estimated_completion_date || null)\n      };\n\n      await onSave(applicationData);\n      onClose();\n    } catch (err) {\n      console.error('Error creating application:', err);\n      // Error is handled by parent component\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const selectedCustomer = customers.find(c => c.id === parseInt(formData.customer_id));\n  const selectedService = services.find(s => s.id === parseInt(formData.service_id));\n  const selectedStaff = staff.find(s => s.id === parseInt(formData.staff_id));\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n      <div className=\"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\n        <div className=\"fixed inset-0 transition-opacity\" onClick={onClose}>\n          <div className=\"absolute inset-0 bg-gray-500 opacity-75\"></div>\n        </div>\n\n        <div className=\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full\">\n          <form onSubmit={handleSubmit}>\n            <div className=\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-medium text-gray-900\">Create New Application</h3>\n                <button\n                  type=\"button\"\n                  onClick={onClose}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <X className=\"h-6 w-6\" />\n                </button>\n              </div>\n\n              {loadingData ? (\n                <div className=\"text-center py-8\">\n                  <div className=\"text-gray-500\">Loading data...</div>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {/* Customer Selection */}\n                  <div>\n                    <label className=\"label\">Customer *</label>\n                    <div className=\"relative\">\n                      <User className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n                      <select\n                        name=\"customer_id\"\n                        value={formData.customer_id}\n                        onChange={handleInputChange}\n                        className={`input-field pl-10 ${errors.customer_id ? 'border-red-500' : ''}`}\n                      >\n                        <option value=\"\">Select a customer</option>\n                        {customers.map(customer => (\n                          <option key={customer.id} value={customer.id}>\n                            {customer.first_name} {customer.last_name} ({customer.email})\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                    {errors.customer_id && (\n                      <p className=\"mt-1 text-sm text-red-600 flex items-center\">\n                        <AlertCircle className=\"h-4 w-4 mr-1\" />\n                        {errors.customer_id}\n                      </p>\n                    )}\n                  </div>\n\n                  {/* Service Selection */}\n                  <div>\n                    <label className=\"label\">Service *</label>\n                    <div className=\"relative\">\n                      <FileText className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n                      <select\n                        name=\"service_id\"\n                        value={formData.service_id}\n                        onChange={handleInputChange}\n                        className={`input-field pl-10 ${errors.service_id ? 'border-red-500' : ''}`}\n                      >\n                        <option value=\"\">Select a service</option>\n                        {services.map(service => (\n                          <option key={service.id} value={service.id}>\n                            {service.name}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                    {errors.service_id && (\n                      <p className=\"mt-1 text-sm text-red-600 flex items-center\">\n                        <AlertCircle className=\"h-4 w-4 mr-1\" />\n                        {errors.service_id}\n                      </p>\n                    )}\n                    {selectedService && (\n                      <p className=\"mt-1 text-sm text-gray-500\">{selectedService.description}</p>\n                    )}\n                  </div>\n\n                  {/* Staff Assignment */}\n                  <div>\n                    <label className=\"label\">Assign To *</label>\n                    <div className=\"relative\">\n                      <User className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n                      <select\n                        name=\"staff_id\"\n                        value={formData.staff_id}\n                        onChange={handleInputChange}\n                        className={`input-field pl-10 ${errors.staff_id ? 'border-red-500' : ''}`}\n                      >\n                        <option value=\"\">Select staff member</option>\n                        {staff.map(member => (\n                          <option key={member.id} value={member.id}>\n                            {member.first_name} {member.last_name} - {member.position}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                    {errors.staff_id && (\n                      <p className=\"mt-1 text-sm text-red-600 flex items-center\">\n                        <AlertCircle className=\"h-4 w-4 mr-1\" />\n                        {errors.staff_id}\n                      </p>\n                    )}\n                  </div>\n\n                  {/* Priority */}\n                  <div>\n                    <label className=\"label\">Priority</label>\n                    <select\n                      name=\"priority\"\n                      value={formData.priority}\n                      onChange={handleInputChange}\n                      className=\"input-field\"\n                    >\n                      <option value=\"low\">Low</option>\n                      <option value=\"normal\">Normal</option>\n                      <option value=\"high\">High</option>\n                      <option value=\"urgent\">Urgent</option>\n                    </select>\n                  </div>\n\n                  {/* Status */}\n                  <div>\n                    <label className=\"label\">Status</label>\n                    <select\n                      name=\"status\"\n                      value={formData.status}\n                      onChange={handleInputChange}\n                      className=\"input-field\"\n                      disabled={user?.role === 'agent'}\n                    >\n                      <option value=\"draft\">Draft</option>\n                      {user?.role !== 'agent' && (\n                        <>\n                          <option value=\"pending\">Pending</option>\n                          <option value=\"submitted\">Submitted</option>\n                          <option value=\"under_review\">Under Review</option>\n                        </>\n                      )}\n                    </select>\n                    {user?.role === 'agent' && (\n                      <p className=\"mt-1 text-xs text-gray-500\">\n                        Status is fixed to Draft. Admin or staff will update it as the application progresses.\n                      </p>\n                    )}\n                  </div>\n\n                  {/* Estimated Completion Date (staff/admin only) */}\n                  {user?.role !== 'agent' && (\n                    <div>\n                      <label className=\"label\">Estimated Completion Date</label>\n                      <div className=\"relative\">\n                        <Calendar className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n                        <input\n                          type=\"date\"\n                          name=\"estimated_completion_date\"\n                          value={formData.estimated_completion_date}\n                          onChange={handleInputChange}\n                          className=\"input-field pl-10\"\n                        />\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Notes */}\n                  <div>\n                    <label className=\"label\">Notes</label>\n                    <textarea\n                      name=\"notes\"\n                      value={formData.notes}\n                      onChange={handleInputChange}\n                      rows={3}\n                      className=\"input-field\"\n                      placeholder=\"Additional notes or requirements...\"\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <div className=\"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse\">\n              <button\n                type=\"submit\"\n                disabled={loading || loadingData}\n                className=\"btn-primary w-full sm:w-auto sm:ml-3 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {loading ? 'Creating...' : 'Create Application'}\n              </button>\n              <button\n                type=\"button\"\n                onClick={onClose}\n                disabled={loading}\n                className=\"btn-secondary w-full sm:w-auto mt-3 sm:mt-0 disabled:opacity-50\"\n              >\n                Cancel\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default NewApplicationModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}